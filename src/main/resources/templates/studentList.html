<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Список студентов</title>
</head>
<body>
<h1>Список студентов</h1>

<!-- Форма для добавления нового студента -->
<form action="/students/add" method="post">
  <input type="text" name="name" placeholder="Имя" required>
  <input type="text" name="lastName" placeholder="Фамилия" required>
  <input type="text" name="firstName" placeholder="Отчество" required>
  <input type="text" name="middleName" placeholder="Дополнительное имя" required>
  <button type="submit">Добавить студента</button>
</form>

<!-- Форма для поиска студентов по имени -->
<form action="/students/search" method="get">
  <input type="text" name="name" placeholder="Поиск по имени">
  <button type="submit">Поиск</button>
</form>

<!-- Форма для фильтрации студентов -->
<form action="/students/filter" method="get">
  <input type="text" name="name" placeholder="Имя">
  <input type="text" name="lastName" placeholder="Фамилия">
  <input type="text" name="firstName" placeholder="Отчество">
  <button type="submit">Фильтровать</button>
</form>

<h2>Все студенты:</h2>

<!-- Начало таблицы студентов -->
<table>
  <thead>
  <tr>
    <th>Выбрать</th>
    <th>Имя</th>
    <th>Фамилия</th>
    <th>Отчество</th>
    <th>Дополнительное имя</th>
    <th>Действия</th>
  </tr>
  </thead>
  <tbody>
  <th:block th:each="student : ${students}">
    <tr>
      <td>
        <!-- Чекбокс для множественного удаления -->
        <input type="checkbox" name="ids" th:value="${student.id}" form="deleteMultipleForm">
      </td>
      <td>
        <!-- Форма для обновления студента -->
        <form action="/students/update" method="post" id="updateForm${student.id}">
          <input type="hidden" name="id" th:value="${student.id}"/>
          <input type="text" name="name" th:value="${student.name}" required/>
      </td>
      <td>
        <input type="text" name="lastName" th:value="${student.lastName}" required/>
      </td>
      <td>
        <input type="text" name="firstName" th:value="${student.firstName}" required/>
      </td>
      <td>
        <input type="text" name="middleName" th:value="${student.middleName}" required/>
      </td>
      <td>
        <!-- Кнопка для обновления внутри формы -->
        <button type="submit" form="updateForm${student.id}">Обновить</button>
        </form>
        <!-- Форма для логического удаления -->
        <form action="/students/delete" method="post" style="display:inline;">
          <input type="hidden" name="id" th:value="${student.id}"/>
          <button type="submit">Удалить</button>
        </form>
        <!-- Форма для физического удаления -->
        <form action="/students/deletePhysical" method="post" style="display:inline;">
          <input type="hidden" name="id" th:value="${student.id}"/>
          <button type="submit">Удалить физически</button>
        </form>
      </td>
    </tr>
  </th:block>
  </tbody>
</table>
<!-- Конец таблицы студентов -->

<!-- Форма для множественного удаления -->
<form action="/students/deleteMultiple" method="post" id="deleteMultipleForm">
  <button type="submit">Удалить выбранных студентов</button>
</form>

<!-- Пагинация -->
<div>
  <a th:href="@{/students(page=${currentPage - 1}, size=${pageSize})}"
     th:if="${currentPage > 1}">Предыдущая</a>
  <span>Страница <span th:text="${currentPage}"></span></span>
  <a th:href="@{/students(page=${currentPage + 1}, size=${pageSize})}"
     th:if="${students.size() == pageSize}">Следующая</a>
</div>

</body>
</html>
